# Implementation Plan: Dissect 2.0 - Orchestration Visualizer

## Goal
Pivot Dissect from algorithm detection to a **unified orchestration visualizer** for AI agent workflows (LangChain, CrewAI, AutoGen).

---

## User Review Required

> [!IMPORTANT]
> **Breaking Change**: All algorithm detection code will be archived. The scanner, detectors, and related CLI commands will be removed.

> [!NOTE]
> Algorithm visualization moves to a new project: **Algoritmi** (on AI8 repo).

---

## Proposed Changes

### Archive (Remove/Move)
- `dissect/detectors/` → Archive or move to Algoritmi
- `dissect/scanner.py` → Archive
- `dissect/ast_normalizer.py` → Archive
- CLI commands: `analyze`, `map` → Remove

---

### New Architecture

#### [NEW] [trace_receiver.py](file:///home/kuro/Documents/Dissect/dissect/trace_receiver.py)
OpenTelemetry-compatible trace ingestion endpoint.
- Accepts OTLP traces via HTTP/gRPC.
- Parses spans into internal graph format.

#### [NEW] [graph.py](file:///home/kuro/Documents/Dissect/dissect/graph.py)
Internal representation of orchestration workflows.
- Nodes: Agents, Tools, LLM Calls.
- Edges: Data flow, control flow.
- Metadata: Latency, token counts, errors.

#### [NEW] [exporters/](file:///home/kuro/Documents/Dissect/dissect/exporters/)
Export workflow graphs to various formats.
- `mermaid.py`: Mermaid diagram output.
- `dot.py`: Graphviz DOT format.
- `html.py`: Interactive D3.js visualization.

#### [MODIFY] [cli.py](file:///home/kuro/Documents/Dissect/dissect/cli.py)
New commands:
- `dissect trace --file trace.json`: Parse a trace file.
- `dissect visualize --format html --output workflow.html`: Generate visualization.
- `dissect serve`: Start a local server for real-time trace viewing.

---

## Verification Plan

### Automated Tests
1. Unit tests for trace parsing.
2. Integration test: Ingest a sample LangChain trace → verify graph structure.

### Manual Verification
1. Run a LangChain agent with OpenTelemetry instrumentation.
2. Export traces to Dissect.
3. Verify the generated HTML visualization matches the expected workflow.
