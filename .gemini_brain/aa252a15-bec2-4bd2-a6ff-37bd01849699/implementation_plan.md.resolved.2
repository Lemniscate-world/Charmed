# Implementation Plan: Dissect 2.0 - Orchestration Visualizer

## Goal
Pivot Dissect from algorithm detection to a **unified orchestration visualizer** for AI agent workflows (LangChain, CrewAI, AutoGen).

---

## User Review Required

> [!IMPORTANT]
> **Breaking Change**: All algorithm detection code will be archived. The scanner, detectors, and related CLI commands will be removed.

> [!NOTE]
> Algorithm visualization moves to a new project: **Algoritmi** (on AI8 repo).

---

## Proposed Changes

### Archive (Remove/Move)
- `dissect/detectors/` â†’ Archive or move to Algoritmi
- [dissect/scanner.py](file:///home/kuro/Documents/Dissect/dissect/scanner.py) â†’ Archive
- [dissect/ast_normalizer.py](file:///home/kuro/Documents/Dissect/dissect/ast_normalizer.py) â†’ Archive
- CLI commands: `analyze`, `map` â†’ Remove

---

### New Architecture

#### [NEW] [trace_receiver.py](file:///home/kuro/Documents/Dissect/dissect/trace_receiver.py)
OpenTelemetry-compatible trace ingestion endpoint.
- Accepts OTLP traces via HTTP/gRPC.
- Parses spans into internal graph format.

#### [NEW] [graph.py](file:///home/kuro/Documents/Dissect/dissect/graph.py)
Internal representation of orchestration workflows.
- Nodes: Agents, Tools, LLM Calls.
- Edges: Data flow, control flow.
- Metadata: Latency, token counts, errors.

#### [NEW] [exporters/](file:///home/kuro/Documents/Dissect/dissect/exporters/)
Export workflow graphs to various formats.
- [mermaid.py](file:///home/kuro/Documents/Dissect/dissect/exporters/mermaid.py): Mermaid diagram output.
- [dot.py](file:///home/kuro/Documents/Dissect/dissect/exporters/dot.py): Graphviz DOT format.
- [html.py](file:///home/kuro/Documents/Dissect/dissect/exporters/html.py): Interactive D3.js visualization.

#### [MODIFY] [cli.py](file:///home/kuro/Documents/Dissect/dissect/cli.py)
New commands:
- `dissect trace --file trace.json`: Parse a trace file.
- `dissect visualize --format html --output workflow.html`: Generate visualization.
- `dissect serve`: Start a local server for real-time trace viewing.

---

## Verification Plan

### Automated Tests
1. Unit tests for trace parsing.
2. Integration test: Ingest a sample LangChain trace â†’ verify graph structure.

### Manual Verification
1. Run a LangChain agent with OpenTelemetry instrumentation.
2. Export traces to Dissect.
3. Verify the generated HTML visualization matches the expected workflow.

---

## Competitive Strategy (Summary)

See full details: [strategic_battle_plan.md](file:///home/kuro/.gemini/antigravity/brain/aa252a15-bec2-4bd2-a6ff-37bd01849699/strategic_battle_plan.md)

| Strategy | Priority |
|---|---|
| ğŸ‡¨ğŸ‡­ Switzerland Positioning (multi-framework) | ğŸ”´ Critical |
| ğŸ”“ Open-Source First (community moat) | ğŸ”´ Critical |
| ğŸ¨ Beautiful by Default (design differentiation) | ğŸŸ  High |
| ğŸš€ Zero-Config Magic (DX) | ğŸŸ  High |
| ğŸ¤– AI-Powered Insights | ğŸŸ¡ Medium |
| ğŸ¢ Enterprise-Ready Open Source | ğŸŸ¡ Medium |
