# Sugar Upgrade — Task Tracker

> **⚠️ AGENT PRIME DIRECTIVE**: You MUST read [.cursorrules](file:///home/kuro/Documents/Sugar/.cursorrules) at the start of every session.
> **Strict Compliance**: Run `bandit` and `logging` checks before verifying tasks.

## 1. Rename & Move
- [x] Move project to `/home/kuro/Documents/Sugar/`
- [x] Rename Python package `brain/` → `sugar/`
- [x] Update all imports and references
- [x] Init git repo + initial commit

## 2. Setup GUI (Vite + React)
- [x] Create `gui/` with Vite + React
- [x] Build welcome screen with branding
- [x] Build Obsidian vault path picker (Step 1)
- [x] Build Linear API setup guide (Step 2)
- [x] Build Ollama status check (Step 3)
- [x] Build summary screen (Step 4)
- [x] Create FastAPI backend for config + filesystem access

## 3. Pre-commit & Security
- [x] Copy + adapt `.pre-commit-config.yaml` from Dissect
- [x] Add `bandit` security scanner
- [x] Add security rule to AI_GUIDELINES.md
- [x] Install pre-commit hooks

## 4. Shared Rules System
- [x] Create `~/Documents/kuro-rules/` with master rules
- [x] Create `install.sh` symlink script
- [x] Link rules into Sugar project
- [x] Link rules into Dissect project

## 5. Verification
- [x] All 33 tests pass after rename
- [x] Pre-commit runs clean
- [x] GUI loads and completes setup flow
- [x] Shared rules symlinks work
## 6. Bug Fixes & Compliance
- [x] Fix GUI build (missing dist/)
- [x] Fix security vulnerability (bind to 127.0.0.1)
- [x] Verify adherence to rules

## Phase 2: Web Interface & Intelligence
- [x] **Logo**: Implement "Sugar Blocks" logo (CSS/SVG)
- [x] **Frontend**: Refactor App.jsx -> SetupWizard | MainApp
- [x] **Frontend**: Build Chat Interface (Message list, Input)
- [x] **Backend**: Add /api/chat endpoint (Streaming)
- [x] **Backend**: Add /api/models/pull endpoint
- [x] **Integration**: Connect Chat UI to Backend
- [x] **Verification**: Test full chat flow

## Phase 3: Persistence
- [x] **Backend**: Initialize Memory instance
- [x] **Backend**: Add /api/conversations endpoints (List, Create, Get)
- [x] **Backend**: Update /api/chat/stream to save messages
- [x] **Frontend**: Add "History" list to Sidebar
- [x] **Frontend**: Handle chat selection and loading
- [x] **Verification**: Verify chat persistence on refresh
- [x] **Verification**: Verify chat persistence on refresh
- [x] **Verification**: Verify Model Pulling & Empty State UX

## Compliance (Recurring)
- [x] **Rules Check**: Verified `AI_GUIDELINES.md` and `.cursorrules`.
- [x] **Security**: Ran `bandit -r sugar/ -ll` (Clean).
- [x] **Artifacts**: Updated `task.md` and `walkthrough.md`.
- [x] **Pre-commit**: Hooks are installed and passing.
- [x] **Pre-commit**: Hooks are installed and passing.

## Phase 4: Connectors & Tools
- [x] **Core**: Add `LLM.chat_stream`
- [x] **Core**: Add `Engine.process_message_stream` (Smart Buffering)
- [x] **Connector**: Implement `ObsidianConnector`
- [x] **Connector**: Implement `LinearConnector`
- [x] **API**: Integrate Engine into `gui_api.py`
- [x] **Verification**: Test Obsidian RAG
- [x] **Verification**: Test Linear Issue Creation

## Phase 5: Ground-Up Debugging & Validation
- [x] **Backend**: Audit `requirements.txt` and run `pytest`
- [x] **Backend**: Complete type hints and replace `print` with `logging`
- [x] **Frontend**: Verify build integrity and Chat UI behavior
- [x] **Connectors**: Enable and test `WebConnector` (DDG)
- [x] **Connectors**: Stress test `ObsidianConnector`
- [x] **Security**: Final `bandit` scan and rule compliance audit
- [x] **Integration**: End-to-end verification of tool loops
